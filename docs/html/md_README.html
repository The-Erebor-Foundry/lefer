<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>lefer: lefer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">lefer
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">A C++ library to draw evenly-spaced and non-overlapping curves in a flow field using the Jobard and Lefer (1997) algorithm.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">lefer </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A small C++ library for drawing evenly-spaced and non-overlapping curves in a flow field (also called of "vector field" in some contexts), using the Jobard and Lefer (1997) algorithm. This algorithm is thoroughly described in a scientific paper (<a href="#references">Jobard and Lefer 1997</a>), but you might find <a href="https://pedro-faria.netlify.app/posts/2024/2024-02-19-flow-even/en/index.html">this article useful too</a>.</p>
<p><img src="./images/even_curves2.png" alt="" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md1"></a>
How to build it?</h1>
<p>This project is built by CMake. You can build the project by running:</p>
<div class="fragment"><div class="line">cmake .</div>
<div class="line">make</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Calculating curves</h1>
<p>The functions from this library calculates all coordinates from each curve you want to draw. They make sure that the coordinates from each curves does not collide (or overlap) with the coordinates from other curves.</p>
<p>Very briefly, the idea behind the algorithm, is to draw a curve by walking through the vector field, and constantly check if we are getting to close from neighbouring curves. If we do get too close, then, we stop drawing the current curve, and start to draw a different curve in a different position of the flow field.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
The main API</h1>
<p>The core part of the Jobard and Lefer algorithm can be splitted in two parts:</p>
<ul>
<li>Drawing non-overlapping curves;</li>
<li>Drawing evenly-spaced, and also, non-overlapping curves;</li>
</ul>
<p>This library offers a single function for each part (<code><a class="el" href="namespacelefer.html#aea61e23cac090b41eedfb4b4b483631b">lefer::even_spaced_curves()</a></code> and <code><a class="el" href="namespacelefer.html#ab061cf97ccaa1b5105ac39aa2e44073a">lefer::non_overlapping_curves()</a></code>). So, if you want to draw curves that do not overlap each other, but you do not care about how much far they are from each other, you probably want to use the <code><a class="el" href="namespacelefer.html#ab061cf97ccaa1b5105ac39aa2e44073a">lefer::non_overlapping_curves()</a></code> function. Otherwise, you use the <code><a class="el" href="namespacelefer.html#aea61e23cac090b41eedfb4b4b483631b">lefer::even_spaced_curves()</a></code>.</p>
<p>Both functions return a <code>std::vector</code> of <code><a class="el" href="classlefer_1_1Curve.html">lefer::Curve</a></code> objects. Each <code><a class="el" href="classlefer_1_1Curve.html">lefer::Curve</a></code> object represents a curve that was drawn into the flow field.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
A minimal example</h1>
<p>The complete example can be found inside the <code>examples</code> directory of this repository. But just as a minimal example.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> flow_field_width = 120;</div>
<div class="line"><span class="keywordtype">int</span> flow_field_height = 120;</div>
<div class="line"><span class="keywordtype">int</span> n_steps = 30;</div>
<div class="line"><span class="keywordtype">int</span> min_steps_allowed = 5;</div>
<div class="line"><span class="keywordtype">double</span> step_length = 0.01 * flow_field_width;</div>
<div class="line"><span class="keywordtype">double</span> d_sep = 0.8;</div>
<div class="line"><span class="keywordtype">int</span> n_curves = 1500;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">double</span>** flow_field;</div>
<div class="line">flow_field = (<span class="keywordtype">double</span>**)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>*) * flow_field_width);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt; flow_field_width; i++) {</div>
<div class="line">    flow_field[i] = (<span class="keywordtype">double</span>*)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>) * flow_field_height);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Populate `flow_field` with noise values using any Noise Generator of</span></div>
<div class="line"><span class="comment">// your preference .... A classic example is to use the Perlin Noise algorithm</span></div>
<div class="line"><span class="comment">// to create these values.</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="classlefer_1_1FlowField.html">lefer::FlowField</a> flow_field_obj = <a class="code" href="classlefer_1_1FlowField.html">lefer::FlowField</a>(flow_field, flow_field_width);</div>
<div class="line"><a class="code" href="classlefer_1_1DensityGrid.html">lefer::DensityGrid</a> density_grid = <a class="code" href="classlefer_1_1DensityGrid.html">lefer::DensityGrid</a>(flow_field_width, flow_field_height, d_sep, 2000);</div>
<div class="line">    </div>
<div class="line"><span class="keywordtype">double</span> x_start = 45.0;</div>
<div class="line"><span class="keywordtype">double</span> y_start = 24.0;</div>
<div class="line">std::vector&lt;lefer::Curve&gt; curves = <a class="code" href="namespacelefer.html#aea61e23cac090b41eedfb4b4b483631b">lefer::even_spaced_curves</a>(</div>
<div class="line">    x_start,</div>
<div class="line">    y_start,</div>
<div class="line">    n_curves,</div>
<div class="line">    n_steps,</div>
<div class="line">    min_steps_allowed,</div>
<div class="line">    step_length,</div>
<div class="line">    d_sep,</div>
<div class="line">    &amp;flow_field_obj,</div>
<div class="line">    &amp;density_grid</div>
<div class="line">);</div>
<div class="ttc" id="aclasslefer_1_1DensityGrid_html"><div class="ttname"><a href="classlefer_1_1DensityGrid.html">lefer::DensityGrid</a></div><div class="ttdef"><b>Definition:</b> lefer.hpp:51</div></div>
<div class="ttc" id="aclasslefer_1_1FlowField_html"><div class="ttname"><a href="classlefer_1_1FlowField.html">lefer::FlowField</a></div><div class="ttdef"><b>Definition:</b> lefer.hpp:10</div></div>
<div class="ttc" id="anamespacelefer_html_aea61e23cac090b41eedfb4b4b483631b"><div class="ttname"><a href="namespacelefer.html#aea61e23cac090b41eedfb4b4b483631b">lefer::even_spaced_curves</a></div><div class="ttdeci">std::vector&lt; Curve &gt; even_spaced_curves(double x_start, double y_start, int n_curves, int n_steps, int min_steps_allowed, double step_length, double d_sep, FlowField *flow_field, DensityGrid *density_grid)</div><div class="ttdef"><b>Definition:</b> main.cpp:86</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
References</h2>
<p>Jobard, Bruno, and Wilfrid Lefer. 1997. “Creating Evenly-Spaced Streamlines of Arbitrary Density.” In Visualization in Scientific Computing ’97, edited by Wilfrid Lefer and Michel Grave, 43–55. Vienna: Springer Vienna. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
